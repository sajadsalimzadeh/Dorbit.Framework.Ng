@use "sass:math";
$animation: 300ms ease;

:host {

  &.middle-center .dialog,
  &.top-start .dialog,
  &.bottom-start .dialog,
  &.top-end .dialog,
  &.bottom-end .dialog,
  &.top-start .dialog,
  &.bottom-start .dialog,
  &.top-end .dialog,
  &.bottom-end .dialog {animation: scale-in $animation;}

  &.direction-ltr.middle-start .dialog,
  &.direction-rtl.middle-end .dialog {animation: left-in $animation;}

  &.direction-rtl.middle-start .dialog,
  &.direction-ltr.middle-end .dialog {animation: right-in $animation;}

  &.top-center .dialog {animation: top-in $animation;}
  &.bottom-center .dialog {animation: bottom-in $animation;}

  &.closing {

    &.middle-center .dialog,
    &.top-start .dialog,
    &.bottom-start .dialog,
    &.top-end .dialog,
    &.bottom-end .dialog,
    &.top-start .dialog,
    &.bottom-start .dialog,
    &.top-end .dialog,
    &.bottom-end .dialog {animation: scale-out $animation;}

    &.direction-ltr.middle-start .dialog,
    &.direction-rtl.middle-end .dialog {animation: left-out $animation;}

    &.direction-rtl.middle-start .dialog,
    &.direction-ltr.middle-end .dialog {animation: right-out $animation;}

    &.top-center .dialog {animation: top-out $animation;}
    &.bottom-center .dialog {animation: bottom-out $animation;}
  }

  .placement {
    display: flex;
    position: absolute;
  }

  &.top-start .placement, &.top-center .placement, &.top-end .placement {top: 0; align-items: flex-start;}
  &.middle-start .placement, &.middle-center .placement, &.middle-end .placement {top: 50%; align-items: center;}
  &.bottom-start .placement, &.bottom-center .placement, &.bottom-end .placement {bottom: 0; align-items: flex-end;}

  &.top-start .placement, &.middle-start .placement, &.bottom-start .placement {justify-content: flex-start;}
  &.top-center .placement, &.middle-center .placement, &.bottom-center .placement {left: 50%; justify-content: center;}
  &.top-end .placement, &.middle-end .placement, &.bottom-end .placement {justify-content: flex-end;}

  &.direction-ltr {
    &.top-start .placement, &.middle-start .placement, &.bottom-start .placement {left: 0;}
    &.top-end .placement, &.middle-end .placement, &.bottom-end .placement {right: 0;}
  }

  &.direction-rtl {
    &.top-start .placement, &.middle-start .placement, &.bottom-start .placement {right: 0;}
    &.top-end .placement, &.middle-end .placement, &.bottom-end .placement {left: 0;}
  }

  &.middle-start .placement {transform: translateY(-50%)}
  &.middle-center .placement {transform: translate(-50%, -50%)}
  &.middle-end .placement {transform: translateY(-50%)}
  &.top-center .placement, &.bottom-center .placement {transform: translateX(-50%)}

  &.movable {

  }

  &.mask:not(.minimize) {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    position: fixed;
    background-color: rgba(var(--color-black-rgb), 0.4);
  }

  &.maximize {
    .placement {
      transform: none;
    }

    .dialog {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      position: fixed;
      border-radius: 0;
      max-width: 100% !important;
      max-height: 100% !important;
    }
  }

  &.minimize {
    z-index: 100;
    position: relative;
    .placement {
      transform: none;
    }

    .dialog {
      bottom: 0;
      width: 20%;
      position: fixed;
      margin: 0 !important;
      border-radius: 0 !important;
      transition: all $animation !important;
      box-shadow: 0 1px 20px 0 rgba(var(--color-black-rgb), 0) !important;
    }

    .body {
      display: none;
    }
  }
}

.dialog {
  max-width: 95%;
  max-height: 95%;

  margin: .8em;
  padding: .8em .7em;
  border-radius: var(--radius-3);
  animation: scale-in 300ms linear;
  background-color: var(--color-white);
  transition: transform $animation;
  box-shadow: 0 1px 20px 0 rgba(var(--color-black-rgb), .13);

  .header {
    gap: .5em;
    display: flex;

    .title {
      flex: 1;
      display: flex;
      align-items: center;

      padding: 0 .3em;
      font-size: 1.3em;
      font-weight: bold;

      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .button {
      width: 1.7em;
      height: 1.7em;
      display: flex;
      cursor: pointer;
      font-size: 1.2em;
      border-radius: 50%;
      align-items: center;
      justify-content: center;
      color: var(--color-gray-9);
      transition: all 100ms ease;

      &:hover {
        color: var(--color-gray-5);
        background-color: var(--color-gray--5);
      }
    }
  }

  .body {
    padding: 0 .7em;
  }
}

@keyframes scale-in {
  0% {transform: scale(0);}
  100% {transform: scale(1);}
}
@keyframes top-in {
  0% {transform: translateY(-100%);}
  100% {transform: translateY(0);}
}
@keyframes left-in {
  0% {transform: translateX(-100%);}
  100% {transform: translateX(0);}
}
@keyframes right-in {
  0% {transform: translateX(100%);}
  100% {transform: translateX(0);}
}
@keyframes bottom-in {
  0% {transform: translateY(100%);}
  100% {transform: translateY(0);}
}

//=== Out ===\\
@keyframes scale-out {
  0% {transform: scale(1);}
  100% {transform: scale(0);}
}
@keyframes top-out {
  0% {transform: translateY(0);}
  100% {transform: translateY(-100%);}
}
@keyframes left-out {
  0% {transform: translateX(0);}
  100% {transform: translateX(-100%);}
}
@keyframes right-out {
  0% {transform: translateX(0);}
  100% {transform: translateX(100%);}
}
@keyframes bottom-out {
  0% {transform: translateY(0);}
  100% {transform: translateY(100%);}
}
