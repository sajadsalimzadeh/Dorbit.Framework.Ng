<div class="control-box" (click)="inputEl.focus()">
  <div class="control-container flex-1">
    <input class="control" #inputEl [(ngModel)]="searchValue"
           (ngModelChange)="search()" (keydown)="handleHoveredIndex($event, true)"
           (focus)="focusHandler()" (blur)="blurHandler()"/>
    <div class="full-absolute placeholder" *ngIf="placeholder && !searchValue && !selectedItem">{{placeholder}}</div>
    <div class="full-absolute text" *ngIf="selectedItem && !searchValue">
      <ng-container *ngIf="optionTemplate; else elseTextTemplate">
        <ng-container *ngTemplateOutlet="optionTemplate.template; context: {$implicit: selectedItem}"></ng-container>
      </ng-container>
      <ng-template #elseTextTemplate>
        {{getText(selectedItem)}}
      </ng-template>
    </div>
  </div>
  <div class="control-container">
    <div class="arrow"></div>
  </div>
</div>
<ng-template #itemsTpl>
  <div class="items-container">
    <ul class="items">
      <li *ngFor="let item of renderedItems" class="item" (click)="select(item, $event)"
          [ngClass]="{selected: (selectedItem == item), hovered: (hoveredItem == item)}">
        <ng-container *ngIf="optionTemplate; else elseOptionTemplate">
          <ng-container *ngTemplateOutlet="optionTemplate.template; context: {$implicit: item}"></ng-container>
        </ng-container>
        <ng-template #elseOptionTemplate>
          <div class="default-template">
            {{getText(item)}}
          </div>
        </ng-template>
      </li>
    </ul>
  </div>
</ng-template>
